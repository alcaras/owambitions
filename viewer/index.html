<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Old World Ambition Viewer</title>
    <style>
/* Reset and base styles */
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: #1a1a2e; color: #eee; line-height: 1.6; min-height: 100vh;
}
.container { max-width: 1400px; margin: 0 auto; padding: 20px; }
.main-layout { display: flex; gap: 20px; }
.sidebar { width: 280px; flex-shrink: 0; }
.content { flex: 1; min-width: 0; }
@media (max-width: 900px) { .main-layout { flex-direction: column; } .sidebar { width: 100%; } }
header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid #333; }
header h1 { color: #d4af37; font-size: 2rem; margin-bottom: 5px; }
.subtitle { color: #888; font-size: 0.95rem; }
.filters { background: #252540; border-radius: 8px; padding: 15px; position: sticky; top: 20px; }
.filter-group { margin-bottom: 15px; }
.filter-group:last-child { margin-bottom: 0; }
.filter-group label { display: block; margin-bottom: 5px; font-size: 0.85rem; color: #aaa; font-weight: 500; }
.filter-group select, .filter-group input[type="text"] {
    width: 100%; padding: 8px 12px; border: 1px solid #444; border-radius: 4px;
    background: #1a1a2e; color: #eee; font-size: 0.95rem;
}
.filter-group select:focus, .filter-group input[type="text"]:focus { outline: none; border-color: #d4af37; }
.families-filter { flex: 2; }
.checkbox-group { display: flex; flex-wrap: wrap; gap: 8px; }
.checkbox-group label {
    display: inline-flex; align-items: center; gap: 5px; padding: 5px 10px;
    background: #1a1a2e; border: 1px solid #444; border-radius: 4px;
    cursor: pointer; font-size: 0.85rem; transition: all 0.2s;
}
.checkbox-group label:hover { border-color: #666; }
.checkbox-group label.checked { background: #3d3d5c; border-color: #d4af37; }
.checkbox-group label.unavailable { opacity: 0.4; cursor: not-allowed; }
.checkbox-group input[type="checkbox"] { display: none; }
.tier-range { display: flex; align-items: center; gap: 10px; }
.tier-range select { width: 70px; }
.tier-range span { color: #888; }
.filter-info { display: flex; justify-content: space-between; align-items: center; margin-top: 15px; padding-top: 15px; border-top: 1px solid #333; }
#result-count { font-size: 0.9rem; color: #888; }
.checkbox-label { display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 0.9rem; color: #888; }
.completed-buttons { display: flex; flex-wrap: wrap; gap: 5px; }
.completed-btn { padding: 5px 10px; border: 1px solid #444; border-radius: 4px; background: #1a1a2e; color: #aaa; cursor: pointer; font-size: 0.85rem; transition: all 0.2s; }
.completed-btn:hover { border-color: #666; }
.completed-btn.active { background: #d4af37; color: #1a1a2e; border-color: #d4af37; font-weight: 600; }
.national-section { margin-top: 30px; padding-top: 20px; border-top: 2px solid #d4af37; }
.national-section h2 { color: #d4af37; font-size: 1.2rem; margin-bottom: 15px; }
.ambition-card.national { border-left-color: #d4af37; border-left-width: 6px; }
.result-header { margin-bottom: 15px; color: #888; font-size: 0.9rem; }
.ambitions-list { display: flex; flex-direction: column; gap: 10px; margin-bottom: 30px; }
.ambition-card {
    background: #252540; border-radius: 8px; padding: 15px;
    border-left: 4px solid #d4af37; transition: all 0.2s;
}
.ambition-card:hover { background: #2d2d4a; }
.ambition-card.unavailable { opacity: 0.5; border-left-color: #555; }
.ambition-card.unavailable .ambition-name { color: #888; }
.ambition-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; }
.ambition-name { font-size: 1.1rem; font-weight: 600; color: #fff; }
.ambition-meta { display: flex; gap: 8px; align-items: center; }
.tier-badge { background: #d4af37; color: #1a1a2e; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: 600; }
.category-badge { background: #3d3d5c; color: #aaa; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem; }
.ambition-details { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px; }
.family-tags { display: flex; flex-wrap: wrap; gap: 5px; }
.family-tag { background: #1a1a2e; border: 1px solid #444; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem; color: #bbb; }
.family-tag.active { border-color: #d4af37; color: #d4af37; }
.tech-prereq, .tech-obsolete, .nation-prereq { font-size: 0.85rem; padding: 2px 8px; border-radius: 4px; }
.tech-prereq { background: #2a4a2a; color: #8f8; }
.tech-obsolete { background: #4a2a2a; color: #f88; }
.nation-prereq { background: #2a2a4a; color: #88f; }
.event-source { margin-top: 10px; padding: 8px; background: #2d1f3d; border: 1px solid #6b3fa0; border-radius: 4px; font-size: 0.85rem; }
.event-only-badge { display: inline-block; background: #6b3fa0; color: #fff; padding: 2px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: 600; margin-right: 8px; }
.event-name { display: block; color: #c9a0dc; margin-top: 5px; }
.event-trigger { display: block; color: #a88fbc; margin-top: 3px; font-style: italic; }
.requirements { margin-top: 10px; padding-top: 10px; border-top: 1px solid #333; font-size: 0.9rem; color: #aaa; }
.requirements strong { color: #d4af37; }
.dlc-badge { background: #4a3a2a; color: #da8; padding: 2px 6px; border-radius: 3px; font-size: 0.75rem; margin-left: 8px; }
.legend { background: #252540; border-radius: 8px; padding: 20px; }
.legend h3 { color: #d4af37; margin-bottom: 15px; font-size: 1rem; }
.legend-content { display: flex; flex-direction: column; gap: 10px; }
.legend-item { display: flex; align-items: center; gap: 15px; font-size: 0.9rem; color: #888; }
.legend-item > span:first-child { flex-shrink: 0; }
.loading { text-align: center; padding: 40px; color: #888; }
@media (max-width: 768px) {
    .container { padding: 15px; }
    header h1 { font-size: 1.5rem; }
    .filter-row { flex-direction: column; gap: 15px; }
    .filter-group { min-width: 100%; }
    .ambition-header { flex-direction: column; gap: 8px; }
    .ambition-meta { order: -1; }
}
.ambition-card[data-class="1"] { border-left-color: #e6b422; }
.ambition-card[data-class="2"] { border-left-color: #9b59b6; }
.ambition-card[data-class="3"] { border-left-color: #3498db; }
.ambition-card[data-class="4"] { border-left-color: #e74c3c; }
.ambition-card[data-class="5"] { border-left-color: #2ecc71; }
.ambition-card[data-class="6"] { border-left-color: #f39c12; }
.ambition-card[data-class="7"] { border-left-color: #1abc9c; }
.ambition-card[data-class="8"] { border-left-color: #27ae60; }
.ambition-card[data-class="9"] { border-left-color: #8e44ad; }
.ambition-card[data-class="10"] { border-left-color: #e91e63; }
.ambition-card[data-class="11"] { border-left-color: #009688; }
.ambition-card[data-class="12"] { border-left-color: #673ab7; }
.ambition-card[data-class="13"] { border-left-color: #ff5722; }
.ambition-card[data-class="14"] { border-left-color: #03a9f4; }
.ambition-card[data-class="15"] { border-left-color: #9c27b0; }
.ambition-card[data-class="16"] { border-left-color: #00bcd4; }
.ambition-card[data-class="17"] { border-left-color: #f44336; }
.ambition-card[data-class="18"] { border-left-color: #ff9800; }
.ambition-card[data-class="19"] { border-left-color: #795548; }
.ambition-card[data-class="20"] { border-left-color: #607d8b; }
.ambition-card[data-class="21"] { border-left-color: #4caf50; }
.ambition-card[data-class="22"] { border-left-color: #00bcd4; }
.ambition-card[data-class="23"] { border-left-color: #ff9800; }
.ambition-card[data-class="24"] { border-left-color: #e91e63; }
.ambition-card[data-class="25"] { border-left-color: #f44336; }
.ambition-card[data-class="26"] { border-left-color: #4caf50; }
.ambition-card[data-class="27"] { border-left-color: #9e9e9e; }
.ambition-card[data-class="28"] { border-left-color: #9c27b0; }
.ambition-card[data-class="29"] { border-left-color: #607d8b; }
.ambition-card[data-class="30"] { border-left-color: #212121; }
.ambition-card[data-class="31"] { border-left-color: #795548; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Old World Ambition Viewer</h1>
            <p class="subtitle">Understand which ambitions you can get and when</p>
        </header>

        <div class="main-layout">
            <aside class="sidebar">
                <section class="filters">
                    <div class="filter-group">
                        <label for="nation-select">Nation</label>
                        <select id="nation-select">
                            <option value="">Any Nation</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Your Families</label>
                        <div id="family-checkboxes" class="checkbox-group"></div>
                    </div>
                    <div class="filter-group">
                        <label>Accepted Ambitions</label>
                        <div class="completed-buttons" id="completed-buttons">
                            <button class="completed-btn active" data-count="all">All</button>
                            <button class="completed-btn" data-count="0">0</button>
                            <button class="completed-btn" data-count="1">1</button>
                            <button class="completed-btn" data-count="2">2</button>
                            <button class="completed-btn" data-count="3">3</button>
                            <button class="completed-btn" data-count="4">4</button>
                            <button class="completed-btn" data-count="5">5</button>
                            <button class="completed-btn" data-count="6">6</button>
                            <button class="completed-btn" data-count="7">7</button>
                            <button class="completed-btn" data-count="8">8</button>
                            <button class="completed-btn" data-count="9">9</button>
                        </div>
                    </div>
                    <div class="filter-group">
                        <label for="class-select">Category</label>
                        <select id="class-select">
                            <option value="">All Categories</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="search-input">Search</label>
                        <input type="text" id="search-input" placeholder="Search...">
                    </div>
                    <div class="filter-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="national-only"> National ambitions only
                        </label>
                    </div>
                    <div class="filter-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="show-event-only" checked> Show event-only
                        </label>
                    </div>
                    <div class="filter-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="show-unavailable"> Show unavailable
                        </label>
                    </div>
                </section>
            </aside>
            <main class="content">
                <div class="result-header">
                    <span id="result-count">0 ambitions</span>
                </div>
                <div id="ambitions-list" class="ambitions-list"></div>
            </main>
        </div>

        <section class="legend">
            <h3>Understanding Ambitions</h3>
            <div class="legend-content">
                <div class="legend-item">
                    <span class="tier-badge">T1-2</span>
                    <span>Tier range the ambition can appear at</span>
                </div>
                <div class="legend-item">
                    <span class="family-tag">Landowners</span>
                    <span>Family preference - matching families get priority, but any goal can still be offered</span>
                </div>
                <div class="legend-item">
                    <span class="tech-prereq">Requires: Forestry</span>
                    <span>Tech prerequisite - must research this tech first</span>
                </div>
                <div class="legend-item">
                    <span class="tech-obsolete">Obsolete: Rhetoric</span>
                    <span>Tech obsolete - no longer available after researching this tech</span>
                </div>
            </div>
        </section>
    </div>

    <script>
let data = null;
let selectedNation = '';
let selectedFamilies = new Set();
let completedCount = 'all'; // 'all' or 0-9

const nationSelect = document.getElementById('nation-select');
const familyCheckboxes = document.getElementById('family-checkboxes');
const completedButtons = document.getElementById('completed-buttons');
const classSelect = document.getElementById('class-select');
const searchInput = document.getElementById('search-input');
const showUnavailable = document.getElementById('show-unavailable');
const nationalOnly = document.getElementById('national-only');
const showEventOnly = document.getElementById('show-event-only');
const resultCount = document.getElementById('result-count');
const ambitionsList = document.getElementById('ambitions-list');

// Load data from JSON file
async function loadData() {
    try {
        ambitionsList.innerHTML = '<div class="loading">Loading ambitions...</div>';
        const response = await fetch('data/ambitions.json');
        data = await response.json();
        initializeUI();
        filterAndRender();
    } catch (error) {
        console.error('Failed to load data:', error);
        ambitionsList.innerHTML = '<div class="loading">Failed to load ambition data.</div>';
    }
}

function initializeUI() {
    const nations = Object.values(data.nations).filter(n => !n.dlc).sort((a, b) => a.name.localeCompare(b.name));
    const dlcNations = Object.values(data.nations).filter(n => n.dlc).sort((a, b) => a.name.localeCompare(b.name));

    nations.forEach(nation => {
        const option = document.createElement('option');
        option.value = nation.id;
        option.textContent = nation.name;
        nationSelect.appendChild(option);
    });

    if (dlcNations.length > 0) {
        const optgroup = document.createElement('optgroup');
        optgroup.label = 'DLC Nations';
        dlcNations.forEach(nation => {
            const option = document.createElement('option');
            option.value = nation.id;
            option.textContent = nation.name + ' (' + nation.dlc + ')';
            optgroup.appendChild(option);
        });
        nationSelect.appendChild(optgroup);
    }

    Object.entries(data.ambitionClasses).sort((a, b) => a[1].localeCompare(b[1])).forEach(([id, name]) => {
        const option = document.createElement('option');
        option.value = id;
        option.textContent = name;
        classSelect.appendChild(option);
    });

    updateFamilyCheckboxes();
    setupCompletedButtons();
    nationSelect.addEventListener('change', handleNationChange);
    classSelect.addEventListener('change', filterAndRender);
    searchInput.addEventListener('input', debounce(filterAndRender, 200));
    showUnavailable.addEventListener('change', filterAndRender);
    nationalOnly.addEventListener('change', filterAndRender);
    showEventOnly.addEventListener('change', filterAndRender);
}

function setupCompletedButtons() {
    completedButtons.querySelectorAll('.completed-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            completedButtons.querySelectorAll('.completed-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            completedCount = btn.dataset.count;
            filterAndRender();
        });
    });
}

function updateFamilyCheckboxes() {
    familyCheckboxes.innerHTML = '';
    const families = Object.values(data.familyClasses).sort((a, b) => a.name.localeCompare(b.name));
    let availableFamilies = new Set();
    if (selectedNation && data.nations[selectedNation]) {
        data.nations[selectedNation].familyClasses.forEach(fc => availableFamilies.add(fc));
    }

    families.forEach(family => {
        const label = document.createElement('label');
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.value = family.id;
        const isAvailable = !selectedNation || availableFamilies.has(family.id);
        if (!isAvailable) {
            label.classList.add('unavailable');
            checkbox.disabled = true;
            selectedFamilies.delete(family.id);
        }
        if (selectedFamilies.has(family.id)) {
            checkbox.checked = true;
            label.classList.add('checked');
        }
        checkbox.addEventListener('change', (e) => {
            if (e.target.checked) { selectedFamilies.add(family.id); label.classList.add('checked'); }
            else { selectedFamilies.delete(family.id); label.classList.remove('checked'); }
            filterAndRender();
        });
        label.appendChild(checkbox);
        label.appendChild(document.createTextNode(family.name));
        familyCheckboxes.appendChild(label);
    });
}

function handleNationChange(e) {
    selectedNation = e.target.value;
    updateFamilyCheckboxes();
    filterAndRender();
}

function filterAndRender() {
    const selectedClass = classSelect.value;
    const searchTerm = searchInput.value.toLowerCase().trim();
    const showUnavail = showUnavailable.checked;
    const showNationalOnly = nationalOnly.checked;
    const showEventOnlyAmbitions = showEventOnly.checked;

    // Calculate tier from completed count
    let tierFilter = null;
    if (completedCount !== 'all') {
        tierFilter = parseInt(completedCount) + 1; // tier = completed + 1
    }

    // Separate national vs regular ambitions
    const nationalAmbitions = data.ambitions.filter(a => a.flags?.victoryEligible && a.minTier === 10);
    const regularAmbitions = data.ambitions.filter(a => !(a.flags?.victoryEligible && a.minTier === 10));

    const filterAmbitions = (ambitions) => ambitions.filter(ambition => {
        // Filter by tier (if specific count selected) - skip for national when showing national only
        if (tierFilter !== null && !showNationalOnly) {
            if (ambition.minTier > tierFilter || ambition.maxTier < tierFilter) return false;
        }
        // Filter by class
        if (selectedClass && ambition.ambitionClass !== parseInt(selectedClass)) return false;
        // Filter event-only ambitions
        if (!showEventOnlyAmbitions && ambition.eventSource) return false;
        // Filter by search term
        if (searchTerm) {
            const searchableText = [ambition.name, ambition.ambitionClassName, ambition.helpText || '',
                ...(ambition.filters?.familyClassNames || [])].join(' ').toLowerCase();
            if (!searchableText.includes(searchTerm)) return false;
        }
        return true;
    });

    const filteredRegular = showNationalOnly ? [] : filterAmbitions(regularAmbitions);
    const filteredNational = filterAmbitions(nationalAmbitions);

    const processAmbitions = (ambitions) => {
        const withAvailability = ambitions.map(ambition => {
            const availability = checkAvailability(ambition);
            return { ...ambition, availability };
        });
        withAvailability.sort((a, b) => {
            // Sort by category first, then by name
            const catCompare = a.ambitionClassName.localeCompare(b.ambitionClassName);
            if (catCompare !== 0) return catCompare;
            return a.name.localeCompare(b.name);
        });
        return showUnavail ? withAvailability : withAvailability.filter(a => a.availability.available);
    };

    const finalRegular = processAmbitions(filteredRegular);
    const finalNational = processAmbitions(filteredNational);

    const availableRegular = filteredRegular.filter(a => checkAvailability(a).available).length;
    const availableNational = filteredNational.filter(a => checkAvailability(a).available).length;

    if (showNationalOnly) {
        resultCount.textContent = availableNational + ' national ambitions available (' + filteredNational.length + ' total)';
    } else {
        let tierText = tierFilter ? ' at Tier ' + tierFilter : '';
        resultCount.textContent = availableRegular + ' available' + tierText + ' (' + filteredRegular.length + ' total) + ' + availableNational + ' national';
    }

    renderAmbitions(finalRegular, finalNational);
}

function checkAvailability(ambition) {
    const result = { available: true, reasons: [] };
    const filters = ambition.filters || {};
    if (filters.nationPrereq && selectedNation && filters.nationPrereq !== selectedNation) {
        result.available = false;
        result.reasons.push('Requires ' + filters.nationPrereqName);
    }
    if (filters.familyClasses && filters.familyClasses.length > 0 && selectedFamilies.size > 0) {
        const hasMatchingFamily = filters.familyClasses.some(fc => selectedFamilies.has(fc));
        if (!hasMatchingFamily) {
            result.available = false;
            result.reasons.push('Preferred by: ' + filters.familyClassNames.join(', '));
        }
    }
    return result;
}

function renderAmbitions(regular, national) {
    if (regular.length === 0 && national.length === 0) {
        ambitionsList.innerHTML = '<div class="loading">No ambitions match your filters.</div>';
        return;
    }

    const renderCard = (ambition, isNational = false) => {
        const filters = ambition.filters || {};
        const requirements = ambition.requirements || {};
        const isAvailable = ambition.availability.available;
        const unavailClass = isAvailable ? '' : 'unavailable';

        let familyTags = '';
        if (filters.familyClassNames && filters.familyClassNames.length > 0) {
            familyTags = filters.familyClassNames.map((name, i) => {
                const familyId = filters.familyClasses[i];
                const isActive = selectedFamilies.has(familyId);
                return '<span class="family-tag ' + (isActive ? 'active' : '') + '">' + name + '</span>';
            }).join('');
        }

        let techInfo = '';
        if (filters.techPrereqName) techInfo += '<span class="tech-prereq">Requires: ' + filters.techPrereqName + '</span>';
        if (filters.techObsoleteName) techInfo += '<span class="tech-obsolete">Obsolete: ' + filters.techObsoleteName + '</span>';
        if (filters.nationPrereqName) techInfo += '<span class="nation-prereq">' + filters.nationPrereqName + ' only</span>';

        let reqText = formatRequirements(requirements);
        let dlcBadge = ambition.dlc ? '<span class="dlc-badge">' + ambition.dlc + '</span>' : '';

        let eventInfo = '';
        if (ambition.eventSource && ambition.eventSource.eventName) {
            const eventDlc = ambition.eventSource.eventDlc ? ' (' + ambition.eventSource.eventDlc + ')' : '';
            eventInfo = '<div class="event-source">' +
                '<span class="event-only-badge">Event Only</span>' +
                '<span class="event-name">Event: "' + ambition.eventSource.eventName + '"' + eventDlc + '</span>' +
                '<span class="event-trigger">Trigger: ' + ambition.eventSource.trigger + '</span>' +
            '</div>';
        } else if (ambition.eventSource) {
            eventInfo = '<div class="event-source">' +
                '<span class="event-only-badge">Unavailable</span>' +
                '<span class="event-trigger">' + ambition.eventSource.trigger + '</span>' +
            '</div>';
        }

        const nationalClass = isNational ? ' national' : '';
        return '<div class="ambition-card ' + unavailClass + nationalClass + '" data-class="' + ambition.ambitionClass + '">' +
            '<div class="ambition-header">' +
                '<span class="ambition-name">' + ambition.name + dlcBadge + '</span>' +
                '<div class="ambition-meta">' +
                    '<span class="tier-badge">T' + ambition.minTier + (ambition.minTier !== ambition.maxTier ? '-' + ambition.maxTier : '') + '</span>' +
                    '<span class="category-badge">' + ambition.ambitionClassName + '</span>' +
                '</div>' +
            '</div>' +
            '<div class="ambition-details">' +
                (familyTags ? '<div class="family-tags">' + familyTags + '</div>' : '') +
                techInfo +
            '</div>' +
            eventInfo +
            (reqText ? '<div class="requirements">' + reqText + '</div>' : '') +
        '</div>';
    };

    let html = regular.map(a => renderCard(a, false)).join('');

    if (national.length > 0) {
        html += '<div class="national-section"><h2>National Ambitions (Victory)</h2>' +
                national.map(a => renderCard(a, true)).join('') + '</div>';
    }

    ambitionsList.innerHTML = html;
}

function formatRequirements(req) {
    if (!req || Object.keys(req).length === 0) return '';
    const parts = [];
    if (req.lawName) parts.push('Enact <strong>' + req.lawName + '</strong>');
    if (req.theologyName) parts.push('Establish <strong>' + req.theologyName + '</strong>');
    if (req.cities) parts.push('Control <strong>' + req.cities + '</strong> cities');
    if (req.connectedCities) parts.push('Have <strong>' + req.connectedCities + '</strong> connected cities');
    if (req.population) parts.push('Reach <strong>' + req.population + '</strong> population');
    if (req.wonders) parts.push('Build <strong>' + req.wonders + '</strong> wonders');
    if (req.laws) parts.push('Enact <strong>' + req.laws + '</strong> laws');
    if (req.militaryUnits) parts.push('Have <strong>' + req.militaryUnits + '</strong> military units');
    if (req.stateReligion) parts.push('Have a <strong>State Religion</strong>');

    ['yieldProduced', 'yieldRate', 'yieldStockpile', 'improvements', 'specialists', 'units', 'projects'].forEach(field => {
        if (req[field] && Array.isArray(req[field])) {
            req[field].forEach(item => parts.push('<strong>' + item.value + '</strong> ' + item.typeName));
        }
    });
    if (req.techNames && req.techNames.length > 0) {
        parts.push('Research: <strong>' + req.techNames.join('</strong> and <strong>') + '</strong>');
    }
    return parts.join(' | ');
}

function debounce(func, wait) {
    let timeout;
    return function(...args) {
        clearTimeout(timeout);
        timeout = setTimeout(() => func(...args), wait);
    };
}

document.addEventListener('DOMContentLoaded', loadData);
    </script>
</body>
</html>